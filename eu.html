<!doctype html>
<html lang="eu">
<head>
    <meta charset="utf-8">
    <title>nodeJS kurtsoa</title>

    <link type="text/css" rel="stylesheet" href="resources/css/kinout-1.0.css">
    <link type="text/css" rel="stylesheet" href="resources/css/theme.kinout.css">
    <link type="text/css" rel="stylesheet" href="resources/css/rainbow/blackboard.css">
</head>

<body>
    <div class="kinout">

        <section>
            <article>
                <h1>node<mark>JS</mark> kurtsoa</h1>            
            </article>
        </section>
        <!-- #/2 nodejs-ri buruz -->
        <section>
            <header class="box">
                <h2>nodejs-ri buruz</h2>
            </header>
            <article data-size="middle">
                <header class="box white"><h4>zer da?</h4></header>
                <blockquote>
                    Node.js Chrome nabigatzailearen javascript vp8 motorrean oinarrituriko plataforma, sarerako aplikazio eskalagarriak sortzeko erreza da. Gertaera-bultzaera, blokeaezin Sarrera/Irteera modeloa erabiltzen dauelarik pisu txiki eta eraginkorrak diren aplikazioak egiteko. Denbora errealen datua asko partekatzeko egokia.
                </blockquote>
                <cite>http://nodejs.org</cite>                
            </article>            
            <article>
                <header class="box white"><h4>Egileari buruz</h4></header>
                <p><img src="http://i.imgur.com/Yvct6.png" alt="Ryan Dahl" title="Ryan Dahl" /></p>
                <p>Ryan Dahl:</p>
                <p>
                    Javascript-en "push/pull" Sarrera/Irteera API-aren falta dela eta hasi zen nodejs sortzen.
                </p>                
            </article>
            <article>
                <header class="box white"><h4>Ryan Dahl esandako zita pare bat</h4></header>
                <blockquote>
                    Batzutan gauza on batzuk kendu behar dozuz gauza bikainak lortzeko.
                    Gehienetan arazoen soluziorik errezena zeure aurrean egon leike.
                </blockquote>                
                <cite>Ryan Dahl</cite>
            </article>
        </section>

        <!-- #/3 Zelan instalatu -->
        <section>
            <header class="box"><h2>Zelan instalatu</h2></header>
            <article>
                <p>
                    <img src="http://upload.wikimedia.org/wikipedia/en/a/a7/Nodejs_logo_light.png" />
                </p>
                <p>nodejs iturburutik konpilatuta edo sistemetarako prestatutako paketeekaz instalatu lei.</p>
                <p><a href="http://www.nodejs.org">http://www.nodejs.org</a></p>
            </article>
            <article>
                <header class="box white"><h4>gnu/linux</h4></header>
                <p>
                    debian:
                </p>
                <pre class="margin-top" contenteditable="true">
                    aptitude install nodejs
                </pre>
                archlinux:
                <pre class="margin-top" contenteditable="true">
                    pacman -S nodejs
                </pre>                                 
            </article>
            <article>
                <header class="box white"><h4>Windows eta OSX</h4></header>
                <p>Jarraitu web honetako instrukzioak:
                    <a href="http://www.nodejs.org/download/">http://www.nodejs.org/download/</a>
                </p>
                <p>Instalatu eta gero sartu nodejs karpeta windows-eko PATH-ean:</p>
                <p><a href="http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx">http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx</a>
            </article>
        </section>

        <!-- #/4 Kontsolan lanean -->
        <section>
            <header class="box"><h2>Kontsolan lanean</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                node
                > 

                1 + 2
                function  foo() { return 1 + 2}
                foo()
                </code>                
                </pre>
            </article>
            <header class="box white"><h4>Aldagai globalak</h4></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    console.log(this);
                    process
                    process.pid
                    process.env
                </code>
                </pre>   
            </article>                             
        </section>    

        <section>            
            <article>
                <header class="box"><h2>Hello World</h2></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    setTimeout(function()
                    {
                        console.log('world');
                    }, 2000);
                    console.log('hello ');       
                </code>             
                </pre>
            </article>
            <article>
                <header class="box"><h4>Hello World 2</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    setInterval(function()
                    {
                        console.log('world');
                    }, 2000);
                    console.log('hello ');       
                </code>             
                </pre>
            </article>                        
        </section>
        <section>
            <header class="box"><h2>Web zerbitzaria</h2></header>
            <article>                
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var http = require('http');

                    var server = http.createServer(function(req, res)
                    {
                            res.writeHead('200',
                                    {
                                            'content-type': 'text/plain'
                                    }
                            );
                            res.end("hello world\n");
                    });

                    server.listen(8000);
                </code>
                </pre>               
            </article>            
            <article>
                <header class="box white"><h4>Goiburuak</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    curl -i http://localhost:8000
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    HTTP/1.1 200 OK
                    content-type: text/plain
                    Connection: keep-alive
                    Transfer-Encoding: chunked

                    hello world                    
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>Goiburuen esanahiak</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    Connection: keep-alive:
                    Konexio irakunkorrak egiteko

                    Transfer-Encoding: chunked:
                    Erantzuna zatika hartzeko
                </code>
                </pre>
            </article>
            <article> 
                <header class="box white"><h4>Erantzuna atzeratzen</h4></header>               
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var http = require('http');

                    var server = http.createServer(function(req, res)
                    {
                        res.writeHead('200',
                            {
                                'content-type': 'text/plain'
                            }
                        );
                        res.write("hello\n");
                        setTimeout(function()
                        {
                            res.end("world\n")
                        }, 1500);
                    });

                    server.listen(8000);
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>"Apache benchmark" estres tesak egiteko</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    ab -n 100 -c 100 http://127.0.0.1:8000/
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    Concurrency Level:      100
                    Time taken for tests:   1.523 seconds
                    Complete requests:      100
                    Failed requests:        0
                    Write errors:           0
                    Total transferred:      7600 bytes
                    HTML transferred:       1200 bytes
                    Requests per second:    65.66 [#/sec] (mean)
                    Time per request:       1523.004 [ms] (mean)
                    Time per request:       15.230 [ms] (mean, across all concurrent requests)
                    Transfer rate:          4.87 [Kbytes/sec] received                    
                </code>
                </pre>                
            </article>            
        </section>
        <section>
            <header class="box"><h2>TCP server</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var net = require('net');

                    var server = net.createServer(function(socket)
                    {
                        socket.write("Hello\n");
                        socket.end("world\n");
                    });

                    server.listen(8000);                    
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    nc localhost 8000
                    telnet localhost 8000
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>txat sinplea</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var net = require('net');

                    var sockets = [];

                    var server = net.createServer(function(socket)
                    {
                        sockets.push(socket);

                        socket.on('data', function(data)
                        {
                            for(var i in sockets)
                            {
                                if(socket!=sockets[i])
                                    sockets[i].write(data);
                            }
                        });
                    });

                    server.listen(8000);                    
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>deskonektatutako bezeroak kendu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
            var net = require('net');

            var sockets = [];

            var server = net.createServer(function(socket)
            {
                sockets.push(socket);

                socket.on('data', function(data)
                {
                    for(var i in sockets)
                    {
                        if(socket!=sockets[i])
                            sockets[i].write(data);
                    }
                });

                socket.on('end', function()
                {
                    // remove socket from array
                    var index = sockets.indexOf(socket);
                    if(index!='-1')
                        sockets.splice(index, 1);       
                });
            });

            server.listen(8000);                    
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>Debug</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                function foo()
                {
                    debugger;
                    return 1 + 2;
                }

                foo();
                </code>
                </pre>                    
            </article>
            <article>
                <header class="box white"><h4>Kontsolatik debugeatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    node debug node-debug.js
                </code>
                </pre>      
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    < debugger listening on port 5858
                    connecting... ok
                    break in debug-example.js:7
                      5 }
                      6 
                      7 foo();
                      8 
                      9 });
                    debug>
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    backtrace
                    next
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>non-blocking adibidea</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    setInterval(function()
    {
        console.log('hello world');
    }, 5000);


    var http = require('http');

    setInterval(function()
    {
        http.get(
        {
            host: 'google.com'
        }, function(res)
        {
            console.log(res.headers);
        });
    }, 3000);

    var server = http.createServer(function(req, res)
    {
        res.writeHead(200);

        setTimeout(function()
        {
            res.end("Web server response");
        }, 1000);
    });

    server.listen(8000);
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>Moduloak</h2></header>
            <article>                
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    module.exports =
    {
        main: function()
        {
            console.log('main');
        };
    }
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var moduloa = require('moduloa.js');

    // edota 

    var moduloa = require('moduloa');

    moduloa.main();

                </code>
                </pre>                                      
            </article>
            <article>
                <header class="box white"><h4>beste era batera</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var moduloa = 
    {
        main: function()
        {
            console.log('main');
        };
    }

    module.exports = moduloa;
                </code>
                </pre>                
            </article>
            <article>
                <header class="box white"><h4>module.exports vs exports</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    module.exports = {};
                    ...
                    var module = require('module');
                </code>
                </pre>             

                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    exports.module = {};
                    exports.a = {};
                    ...
                    var parent = require('module');
                    var module = parent.module;
                    var a = parent.a;
                </code>
                </pre>                                                               
            </article>             
            <article>
                <header class="box white"><h4>object vs function</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
var moduloa =
{
        main: function()
        {
                this.name = 'nodejs kurtsoa';
        };
}

module.exports = moduloa;

                </code>
                </pre> 
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">

var moduloa = require('./moduloa');
var moduloa2 = require('./moduloa');

moduloa.main();

console.log(moduloa2.name);
                </code>
                </pre>                
            </article>            
            <article>
               <header class="box white"><h4>object vs function 2</h4></header> 
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var moduloa = function()
    {
            this.main = function()
            {
                    this.name = 'nodejs kurtsoa';
            };
    };

    module.exports = moduloa;
                </code>
                </pre> 
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var moduloa = require('./moduloa');

    var a = new moduloa();
    var b = new moduloa();

    a.main();

    console.log(a.name);
    console.log(b.name);  
                </code>
                </pre>                                             
            </article>
            <article>
                <header class="box white"><h4>instantzi ezberdiñak erabiltzeko objetuak: zelan erabili?</h4></header> 
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var class_instance = function()
    {
        var private_var;
        this.public_var;

        var private_method = function()
        {
            console.log('private method');
        };

        this.public_method = function()
        {
            console.log('public method');
            new private_method();
        };

        this.__construct = function()
        {
            console.log('__construct');
            this.public_method();
        };
        this.__construct();
    };

    module.exports = class_instance;
                </code>
                </pre>

                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var a = require('./class_instance');
    var b = new a();
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>Funtzio estatikoak edo singleton-ak: zelan erabili?</h4></header> 
                <p>
                    namespace baten barruan funtzioa estatikoak sortu.
                </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var singleton = 
    {
        main: function()
        {
            console.log('main');
        },
        write: function(data)
        {
            console.log(data);
        }
    };

    module.exports = singleton;
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var a = require('./singleton');
    a.main();
    a.write('proba');
                </code>
                </pre>                                
            </article>
        </section>
        <section>
            <header class="box"><h2>NPM</h2></header>
            <article>
            <blockquote>
                Pakete kudeatzailea. Node programak instalatu, publikatu eta kudeatzeko.
            </blockquote>
            </article>
            <article>
                <header class="box white"><h4>bilatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
                    npm search node-static
                    npm search socket.io
                    ...
                </code>
                </pre>                
            </article>
            <article>
                <header class="box white"><h4>instalatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
                    npm install node-static
                    npm install socket.io
                </code>
                </pre>                                
            </article>
            <article>
                <header class="box white"><h4>nodejs-ren PATH-ean instalatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
                    npm install -g node-static
                    npm install -g socket.io
                </code>
                </pre>                                
                <p>Gure proiektuan erabiltzeko:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
                    npm link node-static
                    npm link socket.io
                </code>
                </pre> 
            </article>
            <article>
                <header class="box white"><h4>kendu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
                    npm uninstall -g node-static
                    npm uninstall socket.io
                </code>
                </pre>                                
            </article>    
            <article>
                <header class="box white"><h4>Geuk egindakoa npm-ra publikatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var zital_proba = function()
    {
            this.__construct = function()
            {
                    console.log('zital-proba');
            };
            this.__construct();
    };

    module.exports = zital_proba;                    
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">       
    npm adduser
    npm init
    ...
    package name: zital-proba
    ...
    package version: (0.0.0): 0.0.1
    ...
    Main module/entry point: (none): ./zital-proba.js
    ...
    npm publish
                </code>
                </pre>                
            </article>   
            <article>
                <header class="box white"><h4>Geuk egindakoa npm-tik kendu</h4></header>             <pre class="margin-top" contenteditable="true">
                <code data-language="bash">                      
    npm unpublish zital-proba@0.0.1
                </code>
                </pre>
            </article>                 
        </section>
        <section>
            <header class="box"><h2>SYNC vs ASYNC</h2></header>
            <article>
                <p>sync code:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var fs = require('fs');

    var file = fs.readFileSync('a.txt', 'utf-8');

    if(file)
            console.log(file);
                </code>
                </pre>                                        
                <p>async code:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var fs = require('fs');

    fs.readFile('a.txt', 'utf-8', function(err, data)
    {
            if(err)
                    throw err;

            console.log(data);
    });
                </code>
                </pre>                        
            </article>
            <article>
                <header class="box white"><h4>async habiaratua</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var fs = require('fs');

    fs.readFile('a.txt', 'utf-8', function(err, data)
    {
        if(err)
            throw err;
        console.log(data);

        fs.readFile('b.txt', 'utf-8', function(err, data)
        {   
            if(err)
                throw err;
            console.log(data);      

            fs.readFile('c.txt', 'utf-8', function(err, data)
            {       
                if(err)
                    throw err;
                console.log(data);
            });         
        });
    });
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>async paraleloa</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">                
    var fs = require('fs');

    fs.readFile('a.txt', 'utf-8', function(err, data)
    {
        if(err)
            throw err;
        console.log(data);
    });

    fs.readFile('b.txt', 'utf-8', function(err, data)
    {
        if(err)
            throw err;
        console.log(data);
    });

    fs.readFile('c.txt', 'utf-8', function(err, data)
    {
        if(err)
            throw err;
        console.log(data);
    });                    
                </code>
                </pre>                                
            </article>
        </section>
        <section>
            <header class="box"><h2>Events: Gertaera bultzaerak</h2></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">            
    var emitter = require('events').EventEmitter;

    var e = new emitter();

    e.on('hartu', function(data)
    {
        console.log(data);
    });

    setInterval(function()
    {
        e.emit('hartu', Date.now());            
    }, 1000);    
                </code>
                </pre>
        </section>
        <section>
            <header class="box"><h2>Socket.io</h2></header>
            <article>
            <blockquote>
                Edozein nabigatzailetan edo mobil sistemetan denbora errealean dabilzen aplikazioentzako helburu gisa. %100 javascript.
            </blockquote>
            <p>
                <a href="http://socket.io/">http://socket.io/</a>
            </p>
            </article>
            <article>
                <header class="box white"><h4>Instalazioa</h4></header>
                <p>Zerbitzarian: </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">    
                    npm install socket.io
                </code>
                </pre>
                <p>Bezeroan: </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">    
                    cp node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js resources/js
                </code>
                </pre>

                <p>index.html</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">    
                    ...
                    <script type="text/javascript" src="resources/js/socket.io.js"></script>
                    ...
                </code>
                </pre>                
            </article>
            <article>
                <header class="box white"><h4>Erabilera</h4></header>
                <p>Zerbitzarian:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">    
    var io = require('socket.io').listen(1980);

    io.sockets.on('connection', function (socket)
    {
        socket.emit('news', { hello: 'world' });
        socket.on('my other event', function (data)
        {
            console.log(data);
        });
    });                    
                </code>          
                </pre>
                <p>Bezeroan: </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>    
        <script type="text/javascript" src="../../resources/js/socket.io.js"></script>
        <script type="text/javascript">
        $(window).on('load', function()
        {
            var socket = io.connect("http://"+window.location.host+":"+"1980");
            socket.on('news', function (data)
            {
                console.log(data);
                socket.emit('my other event', { my: 'data' });
            });
        });
        </script>
                </code>
                </pre>                    
            </article>
            <article>
                <header class="box white"><h4>Zerbitzariagaz integrazioa</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    var http = require('http');

    var server = http.Server(function(req, res)
    {
            res.writeHead(200);
            res.end('Kaixo zertan zabilz?');
    });

    var io = require('socket.io').listen(server, {log: false});

    io.sockets.on('connection', function (socket)
    {
            socket.emit('news', { hello: 'world' });
            socket.on('my other event', function (data)
            {
                    console.log(data);
            });
    });

    server.listen(1980);

                </code>  
                </pre>              
            </article>
        </section>
        <section>
            <header class="box"><h2>MongoDB Datu basea</h2></header>
            <article>
                <blockquote>
                    Mondodb dokumentueri zuzendutako datu base sistema da. NoSQL familiko datu base sistema. Datu base klasikoak ez bezala, ez da euren arteko erlazioa daukaten tauletan gordetzen, JSON formatuko BSON (Binary JSON) eskema dinamikodun estruktura dokumentuean gordetzen dira, aplikazio mota batzuetan errazago eta ariñago lan egiten lagunduz.
                </blockquote>            
            </article>
            <article>
                <header class="box white"><h4>instalazioa</h4></header>
                <p>gnu/linux motatako zerbitzarietan:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    aptitude install mongodb
                    pacman -S mongodb
                    ...
                </code>  
                </pre>
                <p>Beste sistemetan: windows, osx... <a href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a></p>
                <p>Bezeroa:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    npm install node-gyp
                    npm install mongodb
                </code>  
                </pre>                   
            </article>
            <article>
                <header class="box white"><h4>mongo kontsola</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    mongo
                </code>  
                </pre> 
                <p>Erakutsi datu baseen zerrenda:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db
                </code>  
                </pre>
                <p>Aukeratu datu basea:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    use test
                </code>
                </pre>
                <p>Sortu "collection"-a (taula):</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.createCollection('kurtsoa')
                </code>
                </pre>                                                  
            </article>
            <article>
                <header class="box white"><h4>datuak sartu/ezabatu</h4></header>
                <p>sartu:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.save({nick: 'foo', hizkuntzak: ['js', 'php', 'python']});
                    var a = {nick: 'foo2', hizkuntzak: ['java', 'brainfuck']};
                    db.kurtsoa.save(a);
                </code>
                </pre>                                                             
                <p>ezabatu:</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.remove({nick: 'foo'});
                </code>
                </pre>                                                                
            </article> 
            <article>
                <header class="box white"><h4>datuak eguneratu</h4></header>
                <p>zer gertzatzen dau hau egiten badogu?</p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.update({nick: 'foo2'}, {hizkuntzak: ["php", "python"]})
                    db.kurtsoa.find();
                </code>
                </pre>  
                <p>hobeago: </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.update({nick: 'foo2'}, {nick: 'foo2', {hizkuntzak: ["php", "python"]})
                    db.kurtsoa.find();
                </code>
                </pre>
                <p>ondo: </p>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.update({nick: 'foo2'}, {$set: {hizkuntzak: ["php", "python"]}});
                    db.kurtsoa.find();
                </code>
                </pre>                             
            </article>
            <article>
                <header class="box white"><h4>datuak bilatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.find();
                </code>
                </pre>         
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    Query Operators:

                    $gt is one of many special query operators. Here are few others:
                    $lt  - '<',   $lte - '<=', 
                    $gte - '>=',  $ne  - '!='

                    $in - 'is in array',  $nin - '! in array'

                    $regex - 'regular expression'
                </code>
                </pre>                                         
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    db.kurtsoa.find({nick: 'foo2'});

                    db.kurtsoa.find({hizkuntzak: {'$in': ['php']}});

                    db.kurtsoa.find({nick: {'$regex': /^f/i}});
                </code>
                </pre>                                                         
            </article> 
            <article>
                <header class="box white"><h4>mysql -> mongodb</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="sql">
                    select * from table order by a
                </code>
                </pre>                                                                         
                <pre class="margin-top" contenteditable="true">
                <code data-language="sql">
                    db.table.find().sort(
                    {
                        "a": 1
                    });
                </code>
                </pre>                                                                                         
                <p>
                    <a href="http://www.querymongo.com/">http://www.querymongo.com</a>
                </p>
            </article>        
        </section>
        </div>        
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="resources/js/socket.io.js"></script>
        <script type="text/javascript" src="resources/js/QuoJS.js"></script>
        <script type="text/javascript" src="resources/js/raf.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Constants.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Element.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Events.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Router.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Step.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Url.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.View.js"></script>
        <script type="text/javascript">
        $$(window).on('load', function()
        {
            addIndex();

            KINOUT.init();

            $$('ul li a').each(function()
            {
                var href = $$(this).attr('href');
                if(href.match(/^#/gi))
                {
                    $$(this).on('click', function(e)
                    {
                        e.preventDefault();
                        window.location.href = $$(this).attr('href');
                        KINOUT.Url.read();
                    });
                }
            });

            $$('a').each(function()
            {
                var href = $$(this).attr('href');
                if(href.match(/^http/gi))
                {
                    $$(this).on('click', function(e)
                    {
                        e.preventDefault();
                        window.open($$(this).attr('href'));
                    });
                }
            });

            var socket = io.connect("http://"+window.location.host+":"+"1980");
            if(typeof(socket)!='undefined')
            {
                socket.on('push', function(direction)
                {
                    KINOUT.Router.direction(direction);
                });
            }
    });

    function addIndex()
    {
        var section = $('<section></section>');
        var _article = $('<article></article>');
        var ul = $('<ul></ul>');

        var li = $('<li><h2>Indizea: </h2></li>');
        ul.append(li);

        var i = 2;
        var k = 0;

        $('section').each(function()
        {
            var head = $('header', $(this)).first().text();
            if(head!=='')
            {
                var li = $('<li><a href="#/'+i+'">'+head+'</a></li>');
                ul.append(li);    

                var article = $('article > header', $(this));
                if(article.length>0)
                {
                    var li = $('<li></li>');
                    var ol = $('<ol></ol>');
                    var j = 1;

                    article.each(function()
                    {
                        var li = $('<li><a href="#/'+i+'/'+j+'">'+$(this).text()+'</a></li>');
                        ol.append(li);
                        j++;
                    });
                    li.append(ol);
                    ul.append(li);
                }
                k++;
                i++;
                if(k>9)
                {
                    _article.append(ul);                    
                    ul = $('<ul></ul>');
                    k = 0;
                }
            }
        });

        _article.append(ul);
        section.append(_article);

        $('section').first().after(section);
    }
</script>
<script type="text/javascript" src="resources/js/rainbow/rainbow.min.js"></script>
<script type="text/javascript" src="resources/js/rainbow/language/generic.js"></script>
</body>
</html>