<!doctype html>
<html lang="eu">
<head>
    <meta charset="utf-8">
    <title>nodeJS kurtsoa</title>

    <link type="text/css" rel="stylesheet" href="resources/css/kinout-1.0.css">
    <link type="text/css" rel="stylesheet" href="resources/css/theme.kinout.css">
    <link type="text/css" rel="stylesheet" href="resources/css/rainbow/blackboard.css">
</head>

<body>
    <div class="kinout">

        <section>
            <article>
                <h1>node<mark>JS</mark> kurtsoa</h1>            
            </article>
        </section>

        <!-- #/1 INDIZEA -->
        <section>
            <article>
                <ul>
                    <li><h2>Indizea: </h2></li>
                    <li><a href="#/">hasiera</a></li>
                    <li><a href="#/1">Indizea</a></li>
                    <li><a href="#/2">nodejs-ri buruz</a></li>
                    <li>
                        <ol>
                            <li><a href="#/2/1">Zer da?</a></li>
                            <li><a href="#/2/2">Egileari buruz: Ryan Dahl</a></li>
                            <li><a href="#/2/3">Ryan Dahl esandako zita pare bat</a></li>
                        </ol>
                    </li>
                    <li><a href="#/3">Zelan instalatu</a></li>
                    <li>
                        <ol>
                            <li><a href="#/3/1">gnu/linux</a></li>
                            <li><a href="#/3/2">windows eta osx</a></li>
                        </ol>
                    </li>
                    <li><a href="#/4">Kontsolan lanean</a></li>
                    <li>
                        <ol>
                            <li><a href="#/4/1">Aldagai globalak</a></li>
                        </ol>
                    </li>
                    
                    <li><a href="#/5">Hello World</a></li>
                    <ol>
                        <li><a href="#/5/1">Hello World 2</a></li>
                    </ol>
                    <li><a href="#/6">Web zerbitzaria</a></li>
                    <li>
                        <ol>
                            <li><a href="#/6/1">Goiburuak</a></li>
                            <li><a href="#/6/2">Goiburuen esanahiak</a></li>
                            <li><a href="#/6/3">Erantzuna atzeratzen</a></li>
                            <li><a href="#/6/4">"Apache benchmark" estres tesak egiteko</a></li>
                        </ol>
                    </li>
                    <li><a href="#/7">TCP server</a></li>
                    <ol>
                        <li><a href="#/7">txat sinplea</a></li>
                        <li><a href="#/7">deskonektatutako bezeroak kendu</a></li>
                    </ol>
                    <li><a href="#/8">Debug</a></li>
                    <ol>
                        <li><a href="#/8/1">Kontsolatik debugeatu</a></li>
                    </ol>
                    <li><a href="#/9">non-blocking adibide bat</a></li>
                    <li><a href="#/10">Moduloak</a></li>
                </ul>
            </article>
        </section>

        <!-- #/2 nodejs-ri buruz -->
        <section>
            <header class="box">
                <h2>nodejs-ri buruz</h2>
            </header>
            <article data-size="middle">
                <header class="box white"><h4>zer da?</h4></header>
                <blockquote>
                    Node.js Chrome nabigatzailearen javascript vp8 motorrean oinarrituriko plataforma, sarerako aplikazio eskalagarriak sortzeko erreza da. Gertaera-bultzaera, blokeaezin Sarrera/Irteera modeloa erabiltzen dauelarik pisu txiki eta eraginkorrak diren aplikazioak egiteko. Denbora errealen datua asko partekatzeko egokia.
                </blockquote>
                <cite>http://nodejs.org</cite>                
            </article>            
            <article>
                <header class="box white"><h4>Egileari buruz</h4></header>
                <p><img src="http://i.imgur.com/Yvct6.png" alt="Ryan Dahl" title="Ryan Dahl" /></p>
                <p>Ryan Dahl:</p>
                <p>
                    Javascript-en "push/pull" Sarrera/Irteera API-aren falta dela eta hasi zen nodejs sortzen.
                </p>                
            </article>
            <article>
                <header class="box white"><h4>Ryan Dahl esandako zita pare bat</h4></header>
                <blockquote>
                    Batzutan gauza on batzuk kendu behar dozuz gauza bikainak lortzeko.
                    Gehienetan arazoen soluziorik errezena zeure aurrean egon leike.
                </blockquote>                
                <cite>Ryan Dahl</cite>
            </article>
        </section>

        <!-- #/3 Zelan instalatu -->
        <section>
            <header class="box"><h2>Zelan instalatu</h2></header>
            <article>
                <p>
                    <img src="http://upload.wikimedia.org/wikipedia/en/a/a7/Nodejs_logo_light.png" />
                </p>
                <p>nodejs iturburutik konpilatuta edo sistemetarako prestatutako paketeekaz instalatu lei.</p>
                <p><a href="http://www.nodejs.org">http://www.nodejs.org</a></p>
            </article>
            <article>
                <header class="box white"><h4>gnu/linux</h4></header>
                <p>
                    debian:
                </p>
                <pre class="margin-top" contenteditable="true">
                    aptitude install nodejs
                </pre>
                archlinux:
                <pre class="margin-top" contenteditable="true">
                    pacman -S nodejs
                </pre>                                 
            </article>
            <article>
                <header class="box white"><h4>Windows eta OSX</h4></header>
                <p>Jarraitu web honetako instrukzioak:
                    <a href="http://www.nodejs.org/download/">http://www.nodejs.org/download/</a>
                </p>
                <p>Instalatu eta gero sartu nodejs karpeta windows-eko PATH-ean:</p>
                <p><a href="http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx">http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx</a>
            </article>
        </section>

        <!-- #/4 Kontsolan lanean -->
        <section>
            <header class="box"><h2>Kontsolan lanean</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                node
                > 

                1 + 2
                function  foo() { return 1 + 2}
                foo()
                </code>                
                </pre>
            </article>
            <header class="box white"><h4>Aldagai globalak</h4></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    console.log(this);
                    process
                    process.pid
                    process.env
                </code>
                </pre>   
            </article>                             
        </section>    

        <section>            
            <article>
                <header class="box"><h2>Hello World</h2></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    setTimeout(function()
                    {
                        console.log('world');
                    }, 2000);
                    console.log('hello ');       
                </code>             
                </pre>
            </article>
            <article>
                <header class="box"><h4>Hello World 2</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    setInterval(function()
                    {
                        console.log('world');
                    }, 2000);
                    console.log('hello ');       
                </code>             
                </pre>
            </article>                        
        </section>
        <section>
            <header class="box"><h2>Web zerbitzaria</h2></header>
            <article>                
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var http = require('http');

                    var server = http.createServer(function(req, res)
                    {
                            res.writeHead('200',
                                    {
                                            'content-type': 'text/plain'
                                    }
                            );
                            res.end("hello world\n");
                    });

                    server.listen(8000);
                </code>
                </pre>               
            </article>            
            <article>
                <header class="box white"><h4>Goiburuak</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    curl -i http://localhost:8000
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    HTTP/1.1 200 OK
                    content-type: text/plain
                    Connection: keep-alive
                    Transfer-Encoding: chunked

                    hello world                    
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>Goiburuen esanahiak</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    Connection: keep-alive:
                    Konexio irakunkorrak egiteko

                    Transfer-Encoding: chunked:
                    Erantzuna zatika hartzeko
                </code>
                </pre>
            </article>
            <article> 
                <header class="box white"><h4>Erantzuna atzeratzen</h4></header>               
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var http = require('http');

                    var server = http.createServer(function(req, res)
                    {
                        res.writeHead('200',
                            {
                                'content-type': 'text/plain'
                            }
                        );
                        res.write("hello\n");
                        setTimeout(function()
                        {
                            res.end("world\n")
                        }, 1500);
                    });

                    server.listen(8000);
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>"Apache benchmark" estres tesak egiteko</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    ab -n 100 -c 100 http://127.0.0.1:8000/
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    Concurrency Level:      100
                    Time taken for tests:   1.523 seconds
                    Complete requests:      100
                    Failed requests:        0
                    Write errors:           0
                    Total transferred:      7600 bytes
                    HTML transferred:       1200 bytes
                    Requests per second:    65.66 [#/sec] (mean)
                    Time per request:       1523.004 [ms] (mean)
                    Time per request:       15.230 [ms] (mean, across all concurrent requests)
                    Transfer rate:          4.87 [Kbytes/sec] received                    
                </code>
                </pre>                
            </article>            
        </section>
        <section>
            <header class="box"><h2>TCP server</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var net = require('net');

                    var server = net.createServer(function(socket)
                    {
                        socket.write("Hello\n");
                        socket.end("world\n");
                    });

                    server.listen(8000);                    
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    nc localhost 8000
                    telnet localhost 8000
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>txat sinplea</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                    var net = require('net');

                    var sockets = [];

                    var server = net.createServer(function(socket)
                    {
                        sockets.push(socket);

                        socket.on('data', function(data)
                        {
                            for(var i in sockets)
                            {
                                if(socket!=sockets[i])
                                    sockets[i].write(data);
                            }
                        });
                    });

                    server.listen(8000);                    
                </code>
                </pre>
            </article>
            <article>
                <header class="box white"><h4>deskonektatutako bezeroak kendu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
            var net = require('net');

            var sockets = [];

            var server = net.createServer(function(socket)
            {
                sockets.push(socket);

                socket.on('data', function(data)
                {
                    for(var i in sockets)
                    {
                        if(socket!=sockets[i])
                            sockets[i].write(data);
                    }
                });

                socket.on('end', function()
                {
                    // remove socket from array
                    var index = sockets.indexOf(socket);
                    if(index!='-1')
                        sockets.splice(index, 1);       
                });
            });

            server.listen(8000);                    
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>Debug</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
                function foo()
                {
                    debugger;
                    return 1 + 2;
                }

                foo();
                </code>
                </pre>                    
            </article>
            <article>
                <header class="box white"><h4>Kontsolatik debugeatu</h4></header>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash">
                    node debug node-debug.js
                </code>
                </pre>      
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    < debugger listening on port 5858
                    connecting... ok
                    break in debug-example.js:7
                      5 }
                      6 
                      7 foo();
                      8 
                      9 });
                    debug>
                </code>
                </pre>
                <pre class="margin-top" contenteditable="true">
                <code data-language="bash"> 
                    backtrace
                    next
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>non-blocking adibidea</h2></header>
            <article>
                <pre class="margin-top" contenteditable="true">
                <code data-language="javascript">
    setInterval(function()
    {
        console.log('hello world');
    }, 5000);


    var http = require('http');

    setInterval(function()
    {
        http.get(
        {
            host: 'google.com'
        }, function(res)
        {
            console.log(res.headers);
        });
    }, 3000);

    var server = http.createServer(function(req, res)
    {
        res.writeHead(200);

        setTimeout(function()
        {
            res.end("Web server response");
        }, 1000);
    });

    server.listen(8000);
                </code>
                </pre>
            </article>
        </section>
        <section>
            <header class="box"><h2>Moduloak</h2></header>
            <article>
                
            </article>
        </section>
        </div>        
        <script type="text/javascript" src="resources/js/socket.io.js"></script>
        <script type="text/javascript" src="resources/js/QuoJS.js"></script>
        <script type="text/javascript" src="resources/js/raf.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Constants.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Element.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Events.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Router.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Step.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.Url.js"></script>
        <script type="text/javascript" src="resources/js/Kinout.View.js"></script>
        <script type="text/javascript">
        $$(window).on('load', function()
        {
            KINOUT.init();

            $$('ul li a').each(function()
            {
                var href = $$(this).attr('href');
                if(href.match(/^#/gi))
                {
                    $$(this).on('click', function(e)
                    {
                        e.preventDefault();
                        window.location.href = $$(this).attr('href');
                        KINOUT.Url.read();
                    });
                }
            });

            $$('a').each(function()
            {
                var href = $$(this).attr('href');
                if(href.match(/^http/gi))
                {
                    $$(this).on('click', function(e)
                    {
                        e.preventDefault();
                        window.open($$(this).attr('href'));
                    });
                }
            });

            var socket = io.connect("http://"+window.location.host+":"+"1980");
            if(typeof(socket)!='undefined')
            {
                socket.on('push', function(direction)
                {
                    KINOUT.Router.direction(direction);
                });
            }
    });
</script>
<script type="text/javascript" src="resources/js/rainbow/rainbow.min.js"></script>
<script type="text/javascript" src="resources/js/rainbow/language/generic.js"></script>
</body>
</html>